import {
  Connector
} from "./chunk-BNISQZGL.js";
import {
  init_define_process_env
} from "./chunk-PLO4ZEQ3.js";

// dep:@snapshot-labs_lock_connectors_walletconnect
init_define_process_env();

// node_modules/@snapshot-labs/lock/connectors/walletconnect.ts
init_define_process_env();
var provider;
var Connector2 = class extends Connector {
  async connect() {
    try {
      const imports = await import("./index.es-PJ5UM3DS.js");
      const { EthereumProvider } = imports;
      provider = await EthereumProvider.init(this.options);
      await provider.enable();
    } catch (e) {
      console.error(e);
      return;
    }
    provider.connectorName = "walletconnect";
    return provider;
  }
  removeHashFromLocalStorage() {
    if (!localStorage)
      return;
    const wcKeys = [];
    for (let i = 0; i < localStorage.length; i++) {
      const key = localStorage.key(i);
      if (key.startsWith("wc@2:")) {
        wcKeys.push(key);
      }
    }
    wcKeys.forEach((key) => localStorage.removeItem(key));
  }
  logout() {
    if ("disconnect" in provider) {
      provider.disconnect().catch(this.removeHashFromLocalStorage);
      provider = null;
    } else {
      this.removeHashFromLocalStorage();
    }
  }
};

// dep:@snapshot-labs_lock_connectors_walletconnect
var snapshot_labs_lock_connectors_walletconnect_default = Connector2;
export {
  snapshot_labs_lock_connectors_walletconnect_default as default
};
//# sourceMappingURL=@snapshot-labs_lock_connectors_walletconnect.js.map
